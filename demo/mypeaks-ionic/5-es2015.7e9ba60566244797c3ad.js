(window.webpackJsonp=window.webpackJsonp||[]).push([[5,69],{"1G5W":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("l7GE"),r=i("ZUHj");function n(t){return e=>e.lift(new l(t))}class l{constructor(t){this.notifier=t}call(t,e){const i=new c(t),s=Object(r.a)(i,this.notifier);return s&&!i.seenValue?(i.add(s),e.subscribe(i)):i}}class c extends s.a{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,i,s,r){this.seenValue=!0,this.complete()}notifyComplete(){}}},"44mT":function(t,e,i){"use strict";i.d(e,"a",(function(){return S}));var s=i("mrSG"),r=i("LvDl"),n=i("2Vo4"),l=i("itXk"),c=i("/uUt"),o=i("7o/Q"),u=i("D0XW");function a(t,e=u.a){return i=>i.lift(new h(t,e))}class h{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new b(t,this.dueTime,this.scheduler))}}class b extends o.a{constructor(t,e,i){super(t),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(d,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function d(t){t.debouncedNext()}var g=i("zptW"),p=i("DPk/"),f=i("n90K"),v=i("fXoL");let m=(()=>{class t{constructor(t){this.storageService=t}get(t,e){return this.storageService.get("prefs."+t,e)}set(t,e){return this.storageService.set("prefs."+t,e)}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(f.a))},t.\u0275prov=v.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),S=(()=>{class t{constructor(t,e,i){this.hillsService=t,this.userDataService=e,this.userPrefsService=i,this.defaultSort="name#asc",this.list=new n.a(null),this.region=new n.a(null),this.status=new n.a(null),this.sortBy=new n.a(this.defaultSort),this.filteredSnapshot=[],this.filteredHills=new n.a([]),this.filterMessage=new n.a(null),this.termFilter="",this.totalHillCount=0,this.prefsKey="filter",this.sortKey="sort",this.hasUserPrefs=!1,this.observeFilters(),this.resetFilters(),this.totalHillCount=this.hillsService.getHills().length,this.loadUserPrefs()}get listOptions(){return[{title:"All Lists",value:null},...this.hillsService.getLists().map(t=>({title:t.name,subtitle:t.description,value:t.id}))]}get regionOptions(){let t=null;return[{title:"All Regions",value:null},...this.hillsService.getRegions().map(e=>{const i={title:e.name,group:e.country!==t?e.country:null,value:e.name};return t=e.country,i})]}get statusOptions(){return[{title:"Any Status",value:null},{title:"Targets",subtitle:"Hills you have marked as a target",value:"targets"},{title:"Climbed",subtitle:"Hills with log entries",value:"climbed"},{title:"None",subtitle:"Hills that are neither targets nor climbed",value:"none"}]}resetFilters(){this.updateList(null),this.updateRegion(null),this.updateTerm(null)}updateList(t){this.list.next(t)}updateRegion(t){this.region.next(t)}updateStatus(t){this.status.next(t)}updateTerm(t){this.termFilter=(t||"").toLocaleLowerCase(),this.updateFilteredHills()}updateSort(t){this.sortBy.next(t||this.defaultSort),this.updateFilteredHills(),this.userPrefsService.set(this.sortKey,this.sortBy.value)}get list$(){return this.list.asObservable()}get region$(){return this.region.asObservable()}get status$(){return this.status.asObservable()}get sort$(){return this.sortBy.asObservable()}get filteredHills$(){return this.filteredHills.asObservable()}get filterMessage$(){return this.filterMessage.asObservable()}get currentFilters(){return{list:this.list.value,region:this.region.value,status:this.status.value}}get currentTerm(){return this.termFilter}get currentSort(){return this.sortBy.value||this.defaultSort}observeFilters(){const t=[this.list.pipe(Object(c.a)()),this.region.pipe(Object(c.a)()),this.status.pipe(Object(c.a)())];Object(l.a)(t).pipe(a(300)).subscribe(()=>{this.performFiltering()});const e=[this.userDataService.loggedHillIds$,this.userDataService.targetHillIds$];Object(l.a)(e).pipe(a(300)).subscribe(()=>{this.currentFilters.status&&this.performFiltering()})}performFiltering(){let t=null;if(this.list.value&&(t=this.hillsService.getHillsInList(this.list.value)),this.region.value){const e=this.hillsService.getHillsInRegion(this.region.value);t=t?r.intersection(t,e):e}if(this.status.value){const e=this.hillsMatchingStatus(this.status.value);t=t?r.intersection(t,e):e}t||(t=this.hillsService.getHills()),this.filteredSnapshot=t,this.updateFilteredHills(),this.hasUserPrefs&&this.userPrefsService.set("filter",this.currentFilters)}updateFilteredHills(){let t=null;this.termFilter||(t=this.filteredSnapshot),t=this.filteredSnapshot.filter(t=>t.name.toLocaleLowerCase().includes(this.termFilter));const e=this.sortBy.value.split("#");this.filteredHills.next(r.orderBy(t,[e[0]],[e[1]||"asc"])),this.filterMessage.next(t.length<this.totalHillCount?`Showing ${t.length}/${this.totalHillCount}`:null)}hillsMatchingStatus(t){switch(t){case"targets":return this.userDataService.targetHills;case"climbed":return this.userDataService.climbedHills;case"none":return this.userDataService.statelessHills}return[]}loadUserPrefs(){return Object(s.a)(this,void 0,void 0,(function*(){try{this.sortBy.next(yield this.userPrefsService.get(this.sortKey,this.defaultSort));const t=yield this.userPrefsService.get(this.prefsKey,{list:null,region:null,status:null});this.updateList(t.list),this.updateRegion(t.region),this.updateStatus(t.status),this.hasUserPrefs=!0}catch(t){console.error("Failed to load user prefs for filtering",t)}}))}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(g.a),v.Qb(p.a),v.Qb(m))},t.\u0275prov=v.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},D0XW:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var s=i("quSY");class r extends s.a{constructor(t,e){super()}schedule(t,e=0){return this}}class n extends r{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,s=void 0;try{this.work(t)}catch(r){i=!0,s=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),s}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let l=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(t,e=0,i){return new this.SchedulerAction(this,t).schedule(i,e)}}return t.now=()=>Date.now(),t})();class c extends l{constructor(t,e=l.now){super(t,()=>c.delegate&&c.delegate!==this?c.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,i){return c.delegate&&c.delegate!==this?c.delegate.schedule(t,e,i):super.schedule(t,e,i)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const o=new c(n)},na4s:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("XNiG"),r=i("44mT"),n=i("1G5W"),l=i("fXoL"),c=i("ofXK"),o=i("TEn/");function u(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-toolbar"),l.Mb(1,"ion-title"),l.oc(2),l.Lb(),l.Mb(3,"ion-buttons",1),l.Mb(4,"ion-button",2),l.Ub("click",(function(){return l.jc(t),l.Yb().resetFilters()})),l.oc(5,"Reset"),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Yb();l.xb(2),l.qc(" ",t.message," ")}}let a=(()=>{class t{constructor(t){this.hillFilterService=t,this.message=null,this.unsubscribe=new s.a}ngOnInit(){this.hillFilterService.filterMessage$.pipe(Object(n.a)(this.unsubscribe)).subscribe(t=>this.message=t)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}resetFilters(){this.hillFilterService.resetFilters()}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(r.a))},t.\u0275cmp=l.Bb({type:t,selectors:[["mp-hill-filter-status"]],decls:1,vars:1,consts:[[4,"ngIf"],["slot","end"],[3,"click"]],template:function(t,e){1&t&&l.nc(0,u,6,1,"ion-toolbar",0),2&t&&l.dc("ngIf",e.message)},directives:[c.j,o.L,o.K,o.g,o.f],styles:[""]}),t})()},phR7:function(t,e,i){"use strict";i.d(e,"a",(function(){return F}));var s=i("mrSG"),r=i("2Vo4"),n=i("XNiG"),l=i("1G5W"),c=i("44mT"),o=i("fXoL"),u=i("TEn/"),a=i("ofXK");function h(t,e){if(1&t&&(o.Mb(0,"ion-item-divider"),o.oc(1),o.Lb()),2&t){const t=e.$implicit;o.xb(1),o.qc(" ",t," ")}}function b(t,e){if(1&t&&(o.Mb(0,"p"),o.oc(1),o.Lb()),2&t){const t=o.Yb().$implicit;o.xb(1),o.pc(t.subtitle)}}function d(t,e){if(1&t){const t=o.Nb();o.Mb(0,"ion-item",4),o.Ub("click",(function(){o.jc(t);const i=e.$implicit;return o.Yb().select(i)})),o.Mb(1,"ion-label"),o.Mb(2,"h4"),o.oc(3),o.Lb(),o.nc(4,b,2,1,"p",5),o.Lb(),o.Lb()}if(2&t){const t=e.$implicit;o.xb(3),o.pc(t.title),o.xb(1),o.dc("ngIf",t.subtitle)}}let g=(()=>{class t{constructor(t){this.popoverController=t,this.items=[],this.current=null}headerFn(t){return t.group}select(t){this.popoverController.dismiss(t.value)}}return t.\u0275fac=function(e){return new(e||t)(o.Hb(u.S))},t.\u0275cmp=o.Bb({type:t,selectors:[["mp-picker"]],inputs:{items:"items",current:"current"},decls:4,vars:2,consts:[["scrollY","false"],[3,"items","headerFn"],[4,"virtualHeader"],[3,"click",4,"virtualItem"],[3,"click"],[4,"ngIf"]],template:function(t,e){1&t&&(o.Mb(0,"ion-content",0),o.Mb(1,"ion-virtual-scroll",1),o.nc(2,h,2,1,"ion-item-divider",2),o.nc(3,d,5,2,"ion-item",3),o.Lb(),o.Lb()),2&t&&(o.xb(1),o.dc("items",e.items)("headerFn",e.headerFn))},directives:[u.i,u.M,u.X,u.Y,u.q,u.p,u.u,a.j],styles:["ion-list-header[_ngcontent-%COMP%]{font-size:.8rem;text-transform:capitalize;background:#efefef}"]}),t})();var p=i("6m4Z");const f=["termFilter"];function v(t,e){if(1&t){const t=o.Nb();o.Mb(0,"ion-toolbar",8),o.Ub("click",(function(e){return o.jc(t),o.Yb().openListPicker(e)})),o.Mb(1,"span"),o.oc(2),o.Lb(),o.Mb(3,"ion-buttons",7),o.Mb(4,"ion-button"),o.Ib(5,"ion-icon",10),o.Lb(),o.Lb(),o.Lb()}if(2&t){const t=o.Yb();o.xb(1),o.zb("active",null!==t.currentState.list),o.xb(1),o.qc("List: ",t.currentListLabel,"")}}function m(t,e){if(1&t){const t=o.Nb();o.Mb(0,"ion-toolbar",8),o.Ub("click",(function(e){return o.jc(t),o.Yb().openRegionPicker(e)})),o.Mb(1,"span"),o.oc(2),o.Lb(),o.Mb(3,"ion-buttons",7),o.Mb(4,"ion-button"),o.Ib(5,"ion-icon",10),o.Lb(),o.Lb(),o.Lb()}if(2&t){const t=o.Yb();o.xb(1),o.zb("active",null!==t.currentState.region),o.xb(1),o.qc("Region: ",t.currentRegionLabel,"")}}var S=function(t){return t[t.lists=0]="lists",t[t.regions=1]="regions",t[t.targets=2]="targets",t[t.climbed=3]="climbed",t}({});let F=(()=>{class t{constructor(t,e,i){this.hillFilterService=t,this.popoverController=e,this.nativeService=i,this.lists=[],this.regions=[],this.sortOptions=[],this.term=new r.a(""),this.FilterChoice=S,this.unsubscribe=new n.a,this.mostRecentList=null,this.mostRecentRegion=null}ngOnInit(){this.lists=this.hillFilterService.listOptions,this.regions=this.hillFilterService.regionOptions,this.sortOptions=[{title:"Hill Name",value:"name#asc",group:"Sort by"},{title:"Height (Highest to Lowest)",value:"heightFeet#desc"},{title:"Height (Lowest to Highest)",value:"heightFeet#asc"}],this.currentState=this.hillFilterService.currentFilters,this.currentSort=this.hillFilterService.currentSort,this.activeFilter=S.lists,this.subscribeToFilters(),this.nativeService.keyboardDidHide$.pipe(Object(l.a)(this.unsubscribe)).subscribe(()=>this.blurInput())}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}updateChoice(t){this.activeFilter===S.lists&&(this.mostRecentList=this.currentState.list,this.hillFilterService.updateList(null)),this.activeFilter===S.regions&&(this.mostRecentRegion=this.currentState.region,this.hillFilterService.updateRegion(null)),this.activeFilter!==S.targets&&this.activeFilter!==S.climbed||this.hillFilterService.updateStatus(null),this.activeFilter=Number.parseInt(t,10),this.activeFilter===S.lists&&this.hillFilterService.updateList(this.mostRecentList),this.activeFilter===S.regions&&this.hillFilterService.updateRegion(this.mostRecentRegion),this.activeFilter===S.targets&&this.hillFilterService.updateStatus("targets"),this.activeFilter===S.climbed&&this.hillFilterService.updateStatus("climbed")}get currentListLabel(){const t=this.lists.find(t=>t.value===this.currentState.list);return t?t.title:""}get currentRegionLabel(){const t=this.regions.find(t=>t.value===this.currentState.region);return t?t.title:""}get currentSortLabel(){const t=this.sortOptions.find(t=>t.value===this.currentSort);return t?t.title:""}openListPicker(t){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.showPicker(this.lists,this.currentState.list,t);void 0!==e&&this.hillFilterService.updateList(e)}))}openRegionPicker(t){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.showPicker(this.regions,this.currentState.region,t);void 0!==e&&this.hillFilterService.updateRegion(e)}))}openSortPicker(t){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.showPicker(this.sortOptions,this.currentSort,t);void 0!==e&&this.hillFilterService.updateSort(e)}))}updateTerm(t){this.hillFilterService.updateTerm(t)}subscribeToFilters(){this.hillFilterService.list$.pipe(Object(l.a)(this.unsubscribe)).subscribe(t=>this.currentState.list=t),this.hillFilterService.region$.pipe(Object(l.a)(this.unsubscribe)).subscribe(t=>this.currentState.region=t),this.hillFilterService.status$.pipe(Object(l.a)(this.unsubscribe)).subscribe(t=>this.currentState.status=t),this.hillFilterService.sort$.pipe(Object(l.a)(this.unsubscribe)).subscribe(t=>this.currentSort=t)}showPicker(t,e,i){return new Promise(r=>Object(s.a)(this,void 0,void 0,(function*(){const s=yield this.popoverController.create({component:g,componentProps:{items:t,current:e},event:i});s.onDidDismiss().then(({data:t})=>{r(t)}),yield s.present()})))}blurInput(){return Object(s.a)(this,void 0,void 0,(function*(){try{(yield this.termFilter.getInputElement()).blur()}catch(t){}}))}}return t.\u0275fac=function(e){return new(e||t)(o.Hb(c.a),o.Hb(u.S),o.Hb(p.a))},t.\u0275cmp=o.Bb({type:t,selectors:[["mp-hill-filters"]],viewQuery:function(t,e){var i;1&t&&o.sc(f,!0),2&t&&o.hc(i=o.Vb())&&(e.termFilter=i.first)},decls:26,vars:7,consts:[["color","primary"],["slot","start"],[3,"value","ionChange"],[3,"value"],[3,"click",4,"ngIf"],["placeholder","Filter this list...","debounce","400",3,"ionChange"],["termFilter",""],["slot","end"],[3,"click"],["name","funnel"],["name","caret-down"]],template:function(t,e){1&t&&(o.Mb(0,"ion-header"),o.Mb(1,"ion-toolbar",0),o.Mb(2,"ion-buttons",1),o.Mb(3,"ion-menu-toggle"),o.Ib(4,"ion-menu-button"),o.Lb(),o.Ib(5,"ion-back-button"),o.Lb(),o.Mb(6,"ion-title"),o.oc(7,"Hill Finder"),o.Lb(),o.Lb(),o.Mb(8,"ion-toolbar"),o.Mb(9,"ion-segment",2),o.Ub("ionChange",(function(t){return e.updateChoice(t.detail.value)})),o.Mb(10,"ion-segment-button",3),o.oc(11,"Lists"),o.Lb(),o.Mb(12,"ion-segment-button",3),o.oc(13,"Regions"),o.Lb(),o.Mb(14,"ion-segment-button",3),o.oc(15,"Targets"),o.Lb(),o.Mb(16,"ion-segment-button",3),o.oc(17,"Climbed"),o.Lb(),o.Lb(),o.Lb(),o.nc(18,v,6,3,"ion-toolbar",4),o.nc(19,m,6,3,"ion-toolbar",4),o.Mb(20,"ion-toolbar"),o.Mb(21,"ion-searchbar",5,6),o.Ub("ionChange",(function(t){return e.updateTerm(t.detail.value)})),o.Lb(),o.Mb(23,"ion-buttons",7),o.Mb(24,"ion-button",8),o.Ub("click",(function(t){return e.openSortPicker(t)})),o.Ib(25,"ion-icon",9),o.Lb(),o.Lb(),o.Lb(),o.Lb()),2&t&&(o.xb(9),o.dc("value",e.activeFilter),o.xb(1),o.dc("value",e.FilterChoice.lists),o.xb(2),o.dc("value",e.FilterChoice.regions),o.xb(2),o.dc("value",e.FilterChoice.targets),o.xb(2),o.dc("value",e.FilterChoice.climbed),o.xb(2),o.dc("ngIf",e.activeFilter===e.FilterChoice.lists),o.xb(1),o.dc("ngIf",e.activeFilter===e.FilterChoice.regions))},directives:[u.n,u.L,u.g,u.z,u.y,u.c,u.d,u.K,u.C,u.U,u.D,a.j,u.B,u.V,u.f,u.o],styles:["ion-toolbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5rem 1rem}.active[_ngcontent-%COMP%]{font-weight:700}"]}),t})()},yNfC:function(t,e,i){"use strict";i.d(e,"a",(function(){return F}));var s=i("fXoL"),r=i("XNiG"),n=i("1G5W"),l=i("44mT"),c=i("ofXK"),o=i("TEn/"),u=(i("Lp9l"),i("DPk/"));function a(t,e){if(1&t&&s.Ib(0,"ion-icon",3),2&t){const t=s.Yb();s.dc("name",t.iconName)}}let h=(()=>{class t{constructor(t){this.userDataService=t,this.logged=[],this.targets=[],this.unsubscribe=new r.a}ngOnInit(){this.userDataService.loggedHillIds$.pipe(Object(n.a)(this.unsubscribe)).subscribe(t=>{this.logged=t,this.updateIcon()}),this.userDataService.targetHillIds$.pipe(Object(n.a)(this.unsubscribe)).subscribe(t=>{this.targets=t,this.updateIcon()})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnChanges(){this.updateIcon()}updateIcon(){this.iconName=this.logged.includes(this.hill.id)?"checkmark":this.targets.includes(this.hill.id)?"star":null}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(u.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["mp-hill-list-row"]],inputs:{hill:"hill"},features:[s.vb],decls:7,vars:3,consts:[[1,"name"],[1,"desc"],["slot","end",3,"name",4,"ngIf"],["slot","end",3,"name"]],template:function(t,e){1&t&&(s.Mb(0,"ion-item"),s.Mb(1,"ion-label"),s.Mb(2,"p",0),s.oc(3),s.Lb(),s.Mb(4,"p",1),s.oc(5),s.Lb(),s.Lb(),s.nc(6,a,1,1,"ion-icon",2),s.Lb()),2&t&&(s.xb(3),s.pc(e.hill.name),s.xb(2),s.pc(e.hill.formattedHeight),s.xb(1),s.dc("ngIf",e.iconName))},directives:[o.p,o.u,c.j,o.o],styles:[".name[_ngcontent-%COMP%]{font-weight:700;color:#000}.desc[_ngcontent-%COMP%]{color:#999}"]}),t})();function b(t,e){if(1&t){const t=s.Nb();s.Mb(0,"div"),s.Mb(1,"mp-hill-list-row",4),s.Ub("click",(function(){s.jc(t);const i=e.$implicit;return s.Yb(2).hillSelected.emit(i)})),s.Lb(),s.Lb()}if(2&t){const t=e.$implicit;s.xb(1),s.dc("hill",t)}}function d(t,e){if(1&t&&(s.Mb(0,"ion-virtual-scroll",2),s.nc(1,b,2,1,"div",3),s.Lb()),2&t){const t=s.Yb();s.dc("items",t.hills)("trackBy",t.trackingFn)}}function g(t,e){if(1&t){const t=s.Nb();s.Mb(0,"p"),s.oc(1,"List: "),s.Mb(2,"ion-chip"),s.oc(3),s.Mb(4,"ion-icon",8),s.Ub("click",(function(){return s.jc(t),s.Yb(3).hillFilterService.updateList(null)})),s.Lb(),s.Lb(),s.Lb()}if(2&t){const t=s.Yb(3);s.xb(3),s.qc("",t.listLabel," ")}}function p(t,e){if(1&t){const t=s.Nb();s.Mb(0,"p"),s.oc(1,"Region: "),s.Mb(2,"ion-chip"),s.oc(3),s.Mb(4,"ion-icon",8),s.Ub("click",(function(){return s.jc(t),s.Yb(3).hillFilterService.updateRegion(null)})),s.Lb(),s.Lb(),s.Lb()}if(2&t){const t=s.Yb(3);s.xb(3),s.qc("",t.regionLabel," ")}}function f(t,e){if(1&t&&(s.Mb(0,"p"),s.oc(1,"Status: "),s.Mb(2,"ion-chip"),s.oc(3),s.Lb(),s.Lb()),2&t){const t=s.Yb(3);s.xb(3),s.pc(t.statusLabel)}}function v(t,e){if(1&t){const t=s.Nb();s.Kb(0),s.Mb(1,"h4"),s.oc(2,"No Results"),s.Lb(),s.Mb(3,"p"),s.oc(4),s.Lb(),s.nc(5,g,5,1,"p",6),s.nc(6,p,5,1,"p",6),s.nc(7,f,4,1,"p",6),s.Mb(8,"ion-button",7),s.Ub("click",(function(){return s.jc(t),s.Yb(2).resetFilters()})),s.oc(9,"Clear Filters"),s.Lb(),s.Jb()}if(2&t){const t=s.Yb(2);s.xb(4),s.pc(t.noResultsIntro),s.xb(1),s.dc("ngIf",t.currentFilters.list),s.xb(1),s.dc("ngIf",t.currentFilters.region),s.xb(1),s.dc("ngIf",t.currentFilters.status)}}function m(t,e){if(1&t&&(s.Kb(0),s.Mb(1,"h4"),s.oc(2),s.Zb(3,"titlecase"),s.Lb(),s.Mb(4,"p"),s.oc(5),s.Lb(),s.Jb()),2&t){const t=s.Yb(2);s.xb(2),s.qc("No ",s.ac(3,2,t.friendlyStatus),""),s.xb(3),s.qc("It looks like you haven't added anything to your ",t.friendlyStatus," yet, browse the hill lists or regions to add your favourite hills.")}}function S(t,e){if(1&t&&(s.Mb(0,"article",5),s.nc(1,v,10,4,"ng-container",6),s.nc(2,m,6,4,"ng-container",6),s.Lb()),2&t){const t=s.Yb();s.xb(1),s.dc("ngIf",!t.isStatusOnlySearch),s.xb(1),s.dc("ngIf",t.isStatusOnlySearch)}}let F=(()=>{class t{constructor(t){this.hillFilterService=t,this.hillSelected=new s.n,this.hills=[],this.unsubscribe=new r.a}ngOnInit(){this.subscribeToData()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}resetFilters(){this.hillFilterService.resetFilters()}trackingFn(t){return t.id}get noResultsIntro(){const t=this.currentFilters;return`No results found${this.currentTerm?` for '${this.currentTerm}'`:""}${t.list||t.region||t.status?" in:":""}`}get currentFilters(){return this.hillFilterService.currentFilters}get currentTerm(){return this.hillFilterService.currentTerm}get listLabel(){const t=this.currentFilters.list;return t?this.hillFilterService.listOptions.find(e=>e.value===t).title:null}get regionLabel(){const t=this.currentFilters.region;return t?this.hillFilterService.regionOptions.find(e=>e.value===t).title:null}get statusLabel(){const t=this.currentFilters.status;return t?this.hillFilterService.statusOptions.find(e=>e.value===t).title:null}get isStatusOnlySearch(){return this.currentFilters.status&&!this.currentFilters.list&&!this.currentFilters.region&&!this.currentTerm}get friendlyStatus(){return"climbed"===this.currentFilters.status?"climbed hills":this.currentFilters.status}subscribeToData(){this.hillFilterService.filteredHills$.pipe(Object(n.a)(this.unsubscribe)).subscribe(t=>this.hills=t)}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(l.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["mp-hill-list"]],outputs:{hillSelected:"hillSelected"},decls:2,vars:2,consts:[[3,"items","trackBy",4,"ngIf"],["class","ion-padding",4,"ngIf"],[3,"items","trackBy"],[4,"virtualItem"],[3,"hill","click"],[1,"ion-padding"],[4,"ngIf"],[3,"click"],["name","close",3,"click"]],template:function(t,e){1&t&&(s.nc(0,d,2,2,"ion-virtual-scroll",0),s.nc(1,S,3,2,"article",1)),2&t&&(s.dc("ngIf",e.hills.length),s.xb(1),s.dc("ngIf",!e.hills.length))},directives:[c.j,o.M,o.Y,h,o.f,o.h,o.o],pipes:[c.m],styles:[""]}),t})()}}]);