!function(){function t(t,e,n,i,r,o,a){try{var c=t[o](a),s=c.value}catch(l){return void n(l)}c.done?e(s):Promise.resolve(s).then(i,r)}function e(e){return function(){var n=this,i=arguments;return new Promise((function(r,o){var a=e.apply(n,i);function c(e){t(a,r,o,c,s,"next",e)}function s(e){t(a,r,o,c,s,"throw",e)}c(void 0)}))}}function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2c9M":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return c}));var i={getEngine:function(){var t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available:function(){return!!this.getEngine()},isCordova:function(){return!!window.TapticEngine},isCapacitor:function(){return!!window.Capacitor},impact:function(t){var e=this.getEngine();if(e){var n=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:n})}},notification:function(t){var e=this.getEngine();if(e){var n=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:n})}},selection:function(){this.impact({style:"light"})},selectionStart:function(){var t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged:function(){var t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd:function(){var t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},r=function(){i.selection()},o=function(){i.selectionStart()},a=function(){i.selectionChanged()},c=function(){i.selectionEnd()},s=function(t){i.impact(t)}},"6i10":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={bubbles:{dur:1e3,circles:9,fn:function(t,e,n){var i=t*e/n-t+"ms",r=2*Math.PI*e/n;return{r:5,style:{top:9*Math.sin(r)+"px",left:9*Math.cos(r)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:function(t,e,n){var i=e/n,r=t*i-t+"ms",o=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":r}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:function(){return{r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}}}},crescent:{dur:750,circles:1,fn:function(){return{r:26,style:{}}}},dots:{dur:750,circles:3,fn:function(t,e){return{r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}}}},lines:{dur:1e3,lines:12,fn:function(t,e,n){return{y1:17,y2:29,style:{transform:"rotate(".concat(30*e+(e<6?180:-180),"deg)"),"animation-delay":t*e/n-t+"ms"}}}},"lines-small":{dur:1e3,lines:12,fn:function(t,e,n){return{y1:12,y2:20,style:{transform:"rotate(".concat(30*e+(e<6?180:-180),"deg)"),"animation-delay":t*e/n-t+"ms"}}}}}},"7wo0":function(t,e,n){"use strict";n.r(e),n.d(e,"SettingsPageModule",(function(){return x}));var i,r,c,s,l,u=n("ofXK"),b=n("3Pt+"),f=n("tyNb"),h=n("TEn/"),d=n("mrSG"),p=n("DPk/"),g=n("fXoL"),m=((r=function t(){a(this,t),this.appName="MyPeaks UK Hills and Mountains",this.appVersion="2.0.0",this.authorName="Jonathan Rewcastle",this.authorSite="https://apps.jonathanrewcastle.co.uk",this.authorEmail="jrewapps@gmail.com",this.privacy="https://apps.jonathanrewcastle.co.uk/privacy/mypeaks",this.helpUrl="https://apps.jonathanrewcastle.co.uk/help/mypeaks"}).\u0275fac=function(t){return new(t||r)},r.\u0275prov=g.Db({token:r,factory:r.\u0275fac,providedIn:"root"}),r),v=((i=function(){function t(e,n){a(this,t),this.config=e,this.modalCtrl=n}return o(t,[{key:"dismiss",value:function(){this.modalCtrl.dismiss()}},{key:"privacy",value:function(){window.open(this.config.privacy)}}]),t}()).\u0275fac=function(t){return new(t||i)(g.Hb(m),g.Hb(h.P))},i.\u0275cmp=g.Bb({type:i,selectors:[["app-about-dialog"]],decls:22,vars:4,consts:[["slot","end"],[3,"click"],["padding","",1,"content"],["src","assets/logo.png"],["target","_blank",3,"href"],["href","http://www.hills-database.co.uk/","target","_blank"],["expand","full",3,"click"]],template:function(t,e){1&t&&(g.Mb(0,"ion-header"),g.Mb(1,"ion-toolbar"),g.Mb(2,"ion-title"),g.oc(3," About MyPeaks "),g.Lb(),g.Mb(4,"ion-buttons",0),g.Mb(5,"ion-button",1),g.Ub("click",(function(){return e.dismiss()})),g.oc(6,"Close"),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Mb(7,"ion-content",2),g.Ib(8,"img",3),g.Mb(9,"p"),g.oc(10),g.Lb(),g.Mb(11,"p"),g.oc(12,"App developed by "),g.Mb(13,"a",4),g.oc(14),g.Lb(),g.Lb(),g.Mb(15,"p"),g.oc(16,"This app uses data from "),g.Mb(17,"a",5),g.oc(18,"The Database of British and Irish Hills"),g.Lb(),g.oc(19," v17"),g.Lb(),g.Mb(20,"ion-button",6),g.Ub("click",(function(){return e.privacy()})),g.oc(21,"View Privacy Policy"),g.Lb(),g.Lb()),2&t&&(g.xb(10),g.rc("",e.config.appName," version ",e.config.appVersion,""),g.xb(3),g.ec("href",e.config.authorSite,g.lc),g.xb(1),g.pc(e.config.authorName))},directives:[h.n,h.L,h.K,h.g,h.f,h.i],styles:[".content[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{display:block;margin:1rem auto;max-height:100px}"]}),i),M=n("gcOT"),y=((c=function(){function t(e){a(this,t),this.userDataService=e}return o(t,[{key:"exportBackup",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.userDataService.getBackup();case 3:return e=t.sent,t.next=6,M.a.FileSharer.share({filename:"mypeaks-".concat(this.formattedDate,".json"),base64Data:btoa(e),contentType:"application/json"});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))}},{key:"pad",value:function(t,e){return Array(Math.max(e-t.toString().length,0)).fill("0").join("")+t.toString()}},{key:"formattedDate",get:function(){var t=new Date;return"".concat(t.getFullYear()).concat(this.pad(t.getMonth()+1,2)).concat(this.pad(t.getDate(),2))}}]),t}()).\u0275fac=function(t){return new(t||c)(g.Qb(p.a))},c.\u0275prov=g.Db({token:c,factory:c.\u0275fac,providedIn:"root"}),c),L=n("Y9WU"),k=[{path:"",component:(s=function(){function t(e,n,i,r,o,c){a(this,t),this.userDataService=e,this.modalController=n,this.config=i,this.exportService=r,this.alertCtrl=o,this.analytics=c}return o(t,[{key:"reset",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({header:"Clear targets and log?",message:"This cannot be undone",buttons:[{text:"Cancel",role:"cancel"},{text:"Clear",handler:function(){return Object(d.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userDataService.deleteUserData();case 2:return t.next=4,this.analytics.logEvent("settings:reset");case 4:case"end":return t.stop()}}),t,this)})))}}]});case 2:return e=t.sent,t.next=5,e.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"backup",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.exportService.exportBackup();case 2:return t.next=4,this.analytics.logEvent("settings:backup");case 4:case"end":return t.stop()}}),t,this)})))}},{key:"about",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:v});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.next=7,this.analytics.logEvent("settings:about");case 7:case"end":return t.stop()}}),t,this)})))}},{key:"help",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.open(this.config.helpUrl),t.next=3,this.analytics.logEvent("settings:help");case 3:case"end":return t.stop()}}),t,this)})))}},{key:"feedback",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.open("mailto:".concat(this.config.authorEmail,"?subject=MyPeaks%20Feedback")),t.next=3,this.analytics.logEvent("settings:feedback");case 3:case"end":return t.stop()}}),t,this)})))}}]),t}(),s.\u0275fac=function(t){return new(t||s)(g.Hb(p.a),g.Hb(h.P),g.Hb(m),g.Hb(y),g.Hb(h.a),g.Hb(L.a))},s.\u0275cmp=g.Bb({type:s,selectors:[["app-settings"]],decls:44,vars:0,consts:[["color","primary"],["slot","start"],[3,"click"],["name","download","slot","start"],["name","information-circle-outline","slot","start"],["name","help-circle-outline","slot","start"],["name","bulb","slot","start"],["name","trash","color","danger","slot","start"]],template:function(t,e){1&t&&(g.Mb(0,"ion-header"),g.Mb(1,"ion-toolbar",0),g.Mb(2,"ion-buttons",1),g.Mb(3,"ion-menu-toggle"),g.Ib(4,"ion-menu-button"),g.Lb(),g.Lb(),g.Mb(5,"ion-title"),g.oc(6,"Settings"),g.Lb(),g.Lb(),g.Lb(),g.Mb(7,"ion-content"),g.Mb(8,"ion-list"),g.Mb(9,"ion-item",2),g.Ub("click",(function(){return e.backup()})),g.Ib(10,"ion-icon",3),g.Mb(11,"ion-label"),g.Mb(12,"h4"),g.oc(13,"Backup Data"),g.Lb(),g.Mb(14,"p"),g.oc(15,"Export your targets and log entries for re-importing at a later date or on a new device"),g.Lb(),g.Lb(),g.Lb(),g.Mb(16,"ion-item",2),g.Ub("click",(function(){return e.about()})),g.Ib(17,"ion-icon",4),g.Mb(18,"ion-label"),g.Mb(19,"h4"),g.oc(20,"About"),g.Lb(),g.Mb(21,"p"),g.oc(22,"Find out more about the app"),g.Lb(),g.Lb(),g.Lb(),g.Mb(23,"ion-item",2),g.Ub("click",(function(){return e.help()})),g.Ib(24,"ion-icon",5),g.Mb(25,"ion-label"),g.Mb(26,"h4"),g.oc(27,"Help & Support"),g.Lb(),g.Mb(28,"p"),g.oc(29,"View help pages and contact support"),g.Lb(),g.Lb(),g.Lb(),g.Mb(30,"ion-item",2),g.Ub("click",(function(){return e.feedback()})),g.Ib(31,"ion-icon",6),g.Mb(32,"ion-label"),g.Mb(33,"h3"),g.oc(34,"Feedback & Suggestions"),g.Lb(),g.Mb(35,"p"),g.oc(36,"Feedback and suggestions for an improved experience"),g.Lb(),g.Lb(),g.Lb(),g.Mb(37,"ion-item",2),g.Ub("click",(function(){return e.reset()})),g.Ib(38,"ion-icon",7),g.Mb(39,"ion-label"),g.Mb(40,"h4"),g.oc(41,"Reset User Data"),g.Lb(),g.Mb(42,"p"),g.oc(43,"Removes all targets and log entries"),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Lb())},directives:[h.n,h.L,h.g,h.z,h.y,h.K,h.i,h.v,h.p,h.o,h.u],styles:[""]}),s)}],x=((l=function t(){a(this,t)}).\u0275mod=g.Fb({type:l}),l.\u0275inj=g.Eb({factory:function(t){return new(t||l)},imports:[[u.b,b.a,h.N,f.i.forChild(k)]]}),l)},IS1p:function(t,e,i){"use strict";i.r(e),i.d(e,"ProgressPageModule",(function(){return C}));var r,c=i("ofXK"),s=i("3Pt+"),l=i("tyNb"),u=i("TEn/"),b=i("XNiG"),f=i("1G5W"),h=i("zptW"),d=i("DPk/"),p=i("fXoL"),g=((r=function t(){a(this,t)}).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=p.Bb({type:r,selectors:[["mp-progress-circle"]],inputs:{percentage:"percentage"},decls:5,vars:2,consts:[["viewBox","0 0 36 36",1,"indicator"],["d","M18 2.0845\n      a 15.9155 15.9155 0 0 1 0 31.831\n      a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#c0c0c0","stroke-width","2"],["d","M18 2.0845\n        a 15.9155 15.9155 0 0 1 0 31.831\n        a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#444","stroke-width","1",1,"circle"]],template:function(t,e){1&t&&(p.Xb(),p.Mb(0,"svg",0),p.Ib(1,"path",1),p.Ib(2,"path",2),p.Lb(),p.Wb(),p.Mb(3,"span"),p.oc(4),p.Lb()),2&t&&(p.xb(2),p.yb("stroke-dasharray",e.percentage+", 100"),p.xb(2),p.qc("",e.percentage,"%"))},styles:["[_nghost-%COMP%]{position:relative}.indicator[_ngcontent-%COMP%]{display:block}span[_ngcontent-%COMP%]{position:absolute;top:18px;left:0;width:100%;text-align:center;font-size:1rem}.circle[_ngcontent-%COMP%]{stroke:#00a6fb;fill:none;stroke-width:2.8;stroke-linecap:round;-webkit-animation:progress 1s ease-out forwards;animation:progress 1s ease-out forwards}@-webkit-keyframes progress{0%{stroke-dasharray:0 100}}@keyframes progress{0%{stroke-dasharray:0 100}}"]}),r);function m(t,e){if(1&t&&(p.Mb(0,"ion-item-divider"),p.oc(1),p.Lb()),2&t){var n=e.$implicit;p.xb(1),p.qc(" ",n," ")}}function v(t,e){if(1&t&&(p.Mb(0,"p"),p.oc(1),p.Lb()),2&t){var n=p.Yb().$implicit;p.xb(1),p.pc(n.desc)}}function M(t,e){if(1&t&&(p.Mb(0,"ion-item"),p.Mb(1,"ion-label"),p.Mb(2,"h4"),p.oc(3),p.Lb(),p.nc(4,v,2,1,"p",8),p.Mb(5,"p"),p.oc(6),p.Lb(),p.Lb(),p.Ib(7,"mp-progress-circle",9),p.Lb()),2&t){var n=e.$implicit;p.xb(3),p.pc(n.name),p.xb(1),p.dc("ngIf",n.desc),p.xb(2),p.rc("Hills Climbed: ",n.count," / ",n.total,""),p.xb(1),p.dc("percentage",n.percent)}}var y,L,k=((y=function(){function t(e,n){a(this,t),this.hillsService=e,this.userDataService=n,this.entries=[],this.climbed=[],this.unsubscribe=new b.a}return o(t,[{key:"ngOnInit",value:function(){this.subscribeToUserData(),this.modeChanged("lists")}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"modeChanged",value:function(t){this.mode=t,this.loadData()}},{key:"headerFn",value:function(t){return t.group}},{key:"loadData",value:function(){this.entries="regions"===this.mode?this.loadRegionProgress():this.loadListProgress()}},{key:"loadListProgress",value:function(){var t,e=this,i=[],r=n(this.hillsService.getLists());try{for(r.s();!(t=r.n()).done;){var o=t.value,a=this.hillsService.getHillsInList(o.id),c=a.filter((function(t){return e.climbed.includes(t.id)})).length,s=(100*c/a.length).toFixed(2);i.push({name:o.name,desc:o.description,total:a.length,count:c,percent:s})}}catch(l){r.e(l)}finally{r.f()}return i}},{key:"loadRegionProgress",value:function(){var t,e=this,i=[],r=null,o=n(this.hillsService.getRegions());try{for(o.s();!(t=o.n()).done;){var a=t.value,c=this.hillsService.getHillsInRegion(a.name),s=c.filter((function(t){return e.climbed.includes(t.id)})).length,l=(100*s/c.length).toFixed(2);i.push({name:a.name,total:c.length,count:s,group:r!==a.country?a.country:null,percent:l}),r=a.country}}catch(u){o.e(u)}finally{o.f()}return i}},{key:"subscribeToUserData",value:function(){var t=this;this.userDataService.loggedHillIds$.pipe(Object(f.a)(this.unsubscribe)).subscribe((function(e){t.climbed=e,t.loadData()}))}}]),t}()).\u0275fac=function(t){return new(t||y)(p.Hb(h.a),p.Hb(d.a))},y.\u0275cmp=p.Bb({type:y,selectors:[["app-progress"]],decls:19,vars:3,consts:[["color","primary"],["slot","start"],[3,"value","ionChange"],["value","lists"],["value","regions"],[3,"items","headerFn"],[4,"virtualHeader"],[4,"virtualItem"],[4,"ngIf"],[3,"percentage"]],template:function(t,e){1&t&&(p.Mb(0,"ion-header"),p.Mb(1,"ion-toolbar",0),p.Mb(2,"ion-buttons",1),p.Mb(3,"ion-menu-toggle"),p.Ib(4,"ion-menu-button"),p.Lb(),p.Lb(),p.Mb(5,"ion-title"),p.oc(6,"Progress"),p.Lb(),p.Lb(),p.Mb(7,"ion-toolbar"),p.Mb(8,"ion-segment",2),p.Ub("ionChange",(function(t){return e.modeChanged(t.detail.value)})),p.Mb(9,"ion-segment-button",3),p.Mb(10,"ion-label"),p.oc(11,"Hill Lists"),p.Lb(),p.Lb(),p.Mb(12,"ion-segment-button",4),p.Mb(13,"ion-label"),p.oc(14,"Hill Regions"),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Mb(15,"ion-content"),p.Mb(16,"ion-virtual-scroll",5),p.nc(17,m,2,1,"ion-item-divider",6),p.nc(18,M,8,5,"ion-item",7),p.Lb(),p.Lb()),2&t&&(p.xb(8),p.dc("value",e.mode),p.xb(8),p.dc("items",e.entries)("headerFn",e.headerFn))},directives:[u.n,u.L,u.g,u.z,u.y,u.K,u.C,u.U,u.D,u.u,u.i,u.M,u.X,u.Y,u.q,u.p,c.j,g],styles:["h4[_ngcontent-%COMP%]{font-weight:700}mp-progress-circle[_ngcontent-%COMP%]{flex:0 0 auto;width:60px;height:60px}"]}),y),x=i("PCNd"),w=[{path:"",component:k}],C=((L=function t(){a(this,t)}).\u0275mod=p.Fb({type:L}),L.\u0275inj=p.Eb({factory:function(t){return new(t||L)},imports:[[c.b,s.a,u.N,l.i.forChild(w),x.a]]}),L)},NqGI:function(t,n,i){"use strict";i.d(n,"a",(function(){return r})),i.d(n,"b",(function(){return o}));var r=function(){var t=e(regeneratorRuntime.mark((function t(e,n,i,r,o){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return",e.attachViewToDom(n,i,o,r));case 2:if("string"==typeof i||i instanceof HTMLElement){t.next=4;break}throw new Error("framework delegate is missing");case 4:if(a="string"==typeof i?n.ownerDocument&&n.ownerDocument.createElement(i):i,r&&r.forEach((function(t){return a.classList.add(t)})),o&&Object.assign(a,o),n.appendChild(a),t.t0=a.componentOnReady,!t.t0){t.next=12;break}return t.next=12,a.componentOnReady();case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})));return function(e,n,i,r,o){return t.apply(this,arguments)}}(),o=function(t,e){if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},"U/uv":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("sxy2"),r=n("ItpF"),o=n("2c9M"),a=function(t,e){var n,a,c=function(t,i,r){if("undefined"!=typeof document){var o=document.elementFromPoint(t,i);o&&e(o)?o!==n&&(l(),s(o,r)):l()}},s=function(t,e){n=t,a||(a=n);var r=n;Object(i.g)((function(){return r.classList.add("ion-activated")})),e()},l=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n){var e=n;Object(i.g)((function(){return e.classList.remove("ion-activated")})),t&&a!==n&&n.click(),n=void 0}};return Object(r.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:function(t){return c(t.currentX,t.currentY,o.a)},onMove:function(t){return c(t.currentX,t.currentY,o.b)},onEnd:function(){l(!0),Object(o.e)(),a=void 0}})}},cyvj:function(t,e,n){"use strict";n.r(e),n.d(e,"HillDetailsPageModule",(function(){return j}));var i=n("ofXK"),r=n("3Pt+"),c=n("tyNb"),s=n("TEn/"),l=n("6NWb"),u=n("mrSG"),b=n("XNiG"),f=n("1G5W"),h=n("zptW"),d=n("DPk/"),p=n("fXoL");function g(t,e){if(1&t){var n=p.Nb();p.Mb(0,"ion-button",8),p.Ub("click",(function(){return p.jc(n),p.Yb().delete()})),p.oc(1,"Delete"),p.Lb()}}var m,v=((m=function(){function t(e,n){a(this,t),this.modal=e,this.userDataService=n}return o(t,[{key:"ngOnInit",value:function(){this.entry||(this.entry={id:null,hillId:this.hillId,date:new Date,notes:"",imported:!1,hillName:this.hillName}),this.form=Object.assign({},this.entry)}},{key:"cancel",value:function(){this.modal.dismiss(!1)}},{key:"dateChange",value:function(t){this.form.date=new Date(t.detail.value)}},{key:"delete",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userDataService.deleteLogEntry(this.entry);case 2:this.modal.dismiss(!0);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"save",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userDataService.updateLogEntry(this.form);case 2:this.modal.dismiss(!0);case 3:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(t){return new(t||m)(p.Hb(s.P),p.Hb(d.a))},m.\u0275cmp=p.Bb({type:m,selectors:[["app-log-editor-dialog"]],inputs:{hillId:"hillId",hillName:"hillName",entry:"entry"},decls:26,vars:4,consts:[["slot","end"],["size","default",3,"click"],[3,"value","ionChange"],["name","description",3,"ngModel","ngModelChange"],["slot","start"],["color","danger","fill","solid",3,"click",4,"ngIf"],["color","light","fill","solid","size","default",3,"click"],["color","primary","fill","solid","size","default",3,"click"],["color","danger","fill","solid",3,"click"]],template:function(t,e){1&t&&(p.Mb(0,"ion-header"),p.Mb(1,"ion-toolbar"),p.Mb(2,"ion-title"),p.oc(3),p.Lb(),p.Mb(4,"ion-buttons",0),p.Mb(5,"ion-button",1),p.Ub("click",(function(){return e.cancel()})),p.oc(6,"Close"),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Mb(7,"ion-content"),p.Mb(8,"form"),p.Mb(9,"ion-item"),p.Mb(10,"ion-label"),p.oc(11,"Date"),p.Lb(),p.Mb(12,"ion-datetime",2),p.Ub("ionChange",(function(t){return e.dateChange(t)})),p.Lb(),p.Lb(),p.Mb(13,"ion-item"),p.Mb(14,"ion-label"),p.oc(15,"Notes"),p.Lb(),p.Mb(16,"ion-textarea",3),p.Ub("ngModelChange",(function(t){return e.form.notes=t})),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Mb(17,"ion-footer"),p.Mb(18,"ion-toolbar"),p.Mb(19,"ion-buttons",4),p.nc(20,g,2,0,"ion-button",5),p.Lb(),p.Mb(21,"ion-buttons",0),p.Mb(22,"ion-button",6),p.Ub("click",(function(){return e.cancel()})),p.oc(23,"Cancel"),p.Lb(),p.Mb(24,"ion-button",7),p.Ub("click",(function(){return e.save()})),p.oc(25,"Save"),p.Lb(),p.Lb(),p.Lb(),p.Lb()),2&t&&(p.xb(3),p.qc("",e.entry.id?"Edit":"Add"," Log Entry"),p.xb(9),p.ec("value",e.form.date),p.xb(4),p.dc("ngModel",e.form.notes),p.xb(4),p.dc("ngIf",e.entry.id))},directives:[s.n,s.L,s.K,s.g,s.f,s.i,r.h,r.e,r.f,s.p,s.u,s.j,s.U,s.J,s.V,r.d,r.g,s.m,i.j],styles:[""]}),m),M=n("EGNa");function y(t,e){1&t&&(p.Mb(0,"section",5),p.Mb(1,"article"),p.Ib(2,"img",6),p.Mb(3,"h4"),p.oc(4,"Welcome to MyPeaks"),p.Lb(),p.Mb(5,"p"),p.oc(6,"Select a hill from the left menu or view the hill map to get started"),p.Lb(),p.Mb(7,"p"),p.Mb(8,"ion-button",7),p.oc(9,"View Hill Map"),p.Lb(),p.Lb(),p.Lb(),p.Lb())}function L(t,e){1&t&&(p.Mb(0,"span",20),p.Ib(1,"ion-icon",21),p.Lb())}function k(t,e){1&t&&(p.Mb(0,"span",20),p.Ib(1,"ion-icon",22),p.Lb())}function x(t,e){if(1&t&&(p.Mb(0,"ion-item"),p.Mb(1,"ion-label"),p.oc(2,"Last Climbed: "),p.Mb(3,"strong"),p.oc(4),p.Zb(5,"date"),p.Lb(),p.Lb(),p.Lb()),2&t){var n=p.Yb(2);p.xb(4),p.pc(p.ac(5,1,n.climbed))}}function w(t,e){if(1&t&&(p.Mb(0,"ion-chip",0),p.oc(1),p.Lb()),2&t){var n=e.$implicit;p.xb(1),p.pc(n)}}function C(t,e){if(1&t){var n=p.Nb();p.Mb(0,"ion-item-sliding"),p.Mb(1,"ion-item",14),p.Ub("click",(function(){p.jc(n);var t=e.$implicit;return p.Yb(2).editLogEntry(t)})),p.Ib(2,"ion-icon",23),p.Mb(3,"ion-label"),p.oc(4),p.Zb(5,"date"),p.Lb(),p.Lb(),p.Mb(6,"ion-item-options",24),p.Mb(7,"ion-item-option",14),p.Ub("click",(function(){p.jc(n);var t=e.$implicit;return p.Yb(2).editLogEntry(t)})),p.oc(8,"Edit"),p.Lb(),p.Mb(9,"ion-item-option",25),p.Ub("click",(function(){p.jc(n);var t=e.$implicit;return p.Yb(2).deleteLogEntry(t)})),p.oc(10,"Delete"),p.Lb(),p.Lb(),p.Lb()}if(2&t){var i=e.$implicit;p.xb(4),p.rc("",p.ac(5,2,i.date),"",i.notes?": "+i.notes:"","")}}function P(t,e){if(1&t){var n=p.Nb();p.Mb(0,"section",8),p.Mb(1,"section",9),p.Mb(2,"article",10),p.Mb(3,"h2"),p.oc(4),p.nc(5,L,2,0,"span",11),p.nc(6,k,2,0,"span",11),p.Lb(),p.Mb(7,"p"),p.oc(8),p.Lb(),p.Lb(),p.Mb(9,"ion-list"),p.Mb(10,"ion-list-header"),p.Mb(11,"ion-label"),p.oc(12,"Details"),p.Lb(),p.Lb(),p.Mb(13,"ion-item"),p.Mb(14,"ion-label"),p.oc(15,"Height: "),p.Mb(16,"strong"),p.oc(17),p.Lb(),p.Lb(),p.Lb(),p.Mb(18,"ion-item"),p.Mb(19,"ion-label"),p.oc(20,"Location: "),p.Mb(21,"strong"),p.oc(22),p.Lb(),p.Lb(),p.Lb(),p.Mb(23,"ion-item"),p.Mb(24,"ion-label"),p.oc(25,"Grid Ref: "),p.Mb(26,"strong"),p.oc(27),p.Lb(),p.Lb(),p.Lb(),p.Mb(28,"ion-item"),p.Mb(29,"ion-label"),p.oc(30,"Lat: "),p.Mb(31,"strong"),p.oc(32),p.Lb(),p.oc(33,", Long: "),p.Mb(34,"strong"),p.oc(35),p.Lb(),p.Lb(),p.Lb(),p.nc(36,x,6,3,"ion-item",12),p.Mb(37,"ion-item"),p.Mb(38,"ion-label"),p.oc(39,"Lists: "),p.nc(40,w,2,1,"ion-chip",13),p.Lb(),p.Lb(),p.Mb(41,"ion-list-header"),p.Mb(42,"ion-label"),p.oc(43,"Target"),p.Lb(),p.Lb(),p.Mb(44,"ion-item",14),p.Ub("click",(function(){return p.jc(n),p.Yb().toggleTarget()})),p.Ib(45,"ion-icon",15),p.Mb(46,"ion-label"),p.oc(47),p.Lb(),p.Lb(),p.Mb(48,"ion-list-header"),p.Mb(49,"ion-label"),p.oc(50,"Log"),p.Lb(),p.Lb(),p.nc(51,C,11,4,"ion-item-sliding",16),p.Mb(52,"ion-item",14),p.Ub("click",(function(){return p.jc(n),p.Yb().addLogEntry()})),p.Ib(53,"ion-icon",17),p.Mb(54,"ion-label"),p.oc(55,"Add Log Entry"),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Mb(56,"section",18),p.Ib(57,"mp-hill-map",19),p.Lb(),p.Lb()}if(2&t){var i=p.Yb();p.xb(4),p.qc("",i.hill.name," "),p.xb(1),p.dc("ngIf",i.climbed),p.xb(1),p.dc("ngIf",i.target),p.xb(2),p.pc(i.friendlyDesc),p.xb(9),p.pc(i.hill.formattedHeight),p.xb(5),p.pc(i.hill.location),p.xb(5),p.pc(i.hill.gridRef),p.xb(5),p.pc(i.hill.lat),p.xb(3),p.pc(i.hill.lng),p.xb(1),p.dc("ngIf",i.climbed),p.xb(4),p.dc("ngForOf",i.lists),p.xb(5),p.dc("name",i.target?"remove":"star"),p.xb(2),p.qc("",i.target?"Remove from":"Add to"," Targets"),p.xb(4),p.dc("ngForOf",i.log),p.xb(6),p.dc("restrictTo",i.hill.id)("suppressFilter",!0)("invalidateSize$",i.invalidateMapSize)}}var O,I,S=((O=function(){function t(e,n,i,r,o){a(this,t),this.route=e,this.hillsService=n,this.userDataService=i,this.modalCtrl=r,this.alertCtrl=o,this.mode="details",this.target=!1,this.log=[],this.climbed=null,this.invalidateMapSize=new b.a,this.unsubscribe=new b.a}return o(t,[{key:"ngOnInit",value:function(){var t=this,e=this.route.snapshot.params.hillId;e&&(this.hill=this.hillsService.getHill(Number.parseInt(e,10)),this.userDataService.targetHillIds$.pipe(Object(f.a)(this.unsubscribe)).subscribe((function(e){return t.target=e.includes(t.hill.id)})),this.loadLog())}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"changeMode",value:function(t){this.mode=t,this.invalidateMapSize.next()}},{key:"editLogEntry",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showLogEditor(t);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"addLogEntry",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.showLogEditor();case 2:case"end":return t.stop()}}),t,this)})))}},{key:"deleteLogEntry",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:"Delete Entry?",message:"This cannot be undone",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:function(){return Object(u.a)(i,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userDataService.deleteLogEntry(t);case 2:this.loadLog();case 3:case"end":return e.stop()}}),e,this)})))}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"showLogEditor",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:v,componentProps:{hillId:this.hill.id,hillName:this.hill.name,entry:t}});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onWillDismiss();case 7:if(i=e.sent,r=i.data,e.t0=r,!e.t0){e.next=13;break}return e.next=13,this.loadLog();case 13:case"end":return e.stop()}}),e,this)})))}},{key:"loadLog",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userDataService.getHillLogEntries(this.hill.id);case 2:return this.log=t.sent,t.next=5,this.userDataService.getMostRecentClimb(this.hill.id);case 5:this.climbed=t.sent,this.invalidateMapSize.next();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"toggleTarget",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userDataService.toggleTarget(this.hill.id);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"friendlyDesc",get:function(){return"A ".concat(this.hill.heightFeet>=1e3?"mountain":this.hill.lists.includes("W")?"fell":"hill"," in the ").concat(this.hill.region," area of ").concat(this.hill.country,", reaching ").concat(this.hill.heightFeet," feet (").concat(this.hill.heightMetres," metres).")}},{key:"lists",get:function(){var t=this.hillsService.getLists().reduce((function(t,e){return t[e.id]=e.name,t}),{});return this.hill.lists.map((function(e){return t[e]})).filter(Boolean)}}]),t}()).\u0275fac=function(t){return new(t||O)(p.Hb(c.a),p.Hb(h.a),p.Hb(d.a),p.Hb(s.P),p.Hb(s.a))},O.\u0275cmp=p.Bb({type:O,selectors:[["app-hill-details"]],decls:11,vars:3,consts:[["color","primary"],["slot","start"],["scrollY","false"],["id","welcome",4,"ngIf"],["id","hill-details",4,"ngIf"],["id","welcome"],["src","assets/logo.png","alt","MyPeaks",1,"logo"],["routerLink","/split/hill-map"],["id","hill-details"],["id","info"],[1,"ion-padding"],["class","icon",4,"ngIf"],[4,"ngIf"],["color","primary",4,"ngFor","ngForOf"],[3,"click"],["slot","start",3,"name"],[4,"ngFor","ngForOf"],["name","add","slot","start"],["id","map"],[3,"restrictTo","suppressFilter","invalidateSize$"],[1,"icon"],["name","checkmark-circle-outline",1,"check"],["name","star"],["name","create","slot","start"],["side","end"],["color","danger",3,"click"]],template:function(t,e){1&t&&(p.Mb(0,"ion-header"),p.Mb(1,"ion-toolbar",0),p.Mb(2,"ion-buttons",1),p.Mb(3,"ion-menu-toggle"),p.Ib(4,"ion-menu-button"),p.Lb(),p.Ib(5,"ion-back-button"),p.Lb(),p.Mb(6,"ion-title"),p.oc(7),p.Lb(),p.Lb(),p.Lb(),p.Mb(8,"ion-content",2),p.nc(9,y,10,0,"section",3),p.nc(10,P,58,17,"section",4),p.Lb()),2&t&&(p.xb(7),p.pc((null==e.hill?null:e.hill.name)||"Welcome to MyPeaks"),p.xb(2),p.dc("ngIf",!e.hill),p.xb(1),p.dc("ngIf",e.hill))},directives:[s.n,s.L,s.g,s.z,s.y,s.c,s.d,s.K,s.i,i.j,s.f,s.T,c.h,s.v,s.w,s.u,s.p,i.i,s.o,M.a,s.h,s.t,s.s,s.r],pipes:[i.d],styles:["#welcome[_ngcontent-%COMP%]{text-align:center;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:url(/assets/bg.jpg) no-repeat 50%;background-size:cover;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.8),0 0 0 #000}#welcome[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{flex:0 0 auto;padding:2rem}#welcome[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:100px}#hill-details[_ngcontent-%COMP%]{height:100%}#hill-details[_ngcontent-%COMP%]   #info[_ngcontent-%COMP%]{height:calc(100% - 200px);flex-direction:column;overflow-y:auto}#hill-details[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:200px}#hill-details[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%}#hill-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem}#hill-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin:0 0 0 .5rem}#hill-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:relative;top:3px}#hill-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   ion-icon.check[_ngcontent-%COMP%]{top:4px}#hill-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}),O),E=n("PCNd"),D=[{path:"",component:S},{path:":hillId",component:S}],j=((I=function t(){a(this,t)}).\u0275mod=p.Fb({type:I}),I.\u0275inj=p.Eb({factory:function(t){return new(t||I)},imports:[[i.b,r.a,s.N,c.i.forChild(D),l.c,E.a]]}),I)},fH7P:function(t,e,n){"use strict";n.r(e),n.d(e,"HillMapPageModule",(function(){return h}));var i,r,o=n("TEn/"),c=n("tyNb"),s=n("ofXK"),l=n("fXoL"),u=n("EGNa"),b=((i=function t(){a(this,t)}).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=l.Bb({type:i,selectors:[["hill-map-page"]],decls:9,vars:0,consts:[["color","primary"],["slot","start"],["scrollX","false","scrollY","false"]],template:function(t,e){1&t&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar",0),l.Mb(2,"ion-buttons",1),l.Mb(3,"ion-menu-toggle"),l.Ib(4,"ion-menu-button"),l.Lb(),l.Lb(),l.Mb(5,"ion-title"),l.oc(6," Hill Map "),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-content",2),l.Ib(8,"mp-hill-map"),l.Lb())},directives:[o.n,o.L,o.g,o.z,o.y,o.K,o.i,u.a],styles:[""]}),i),f=n("PCNd"),h=((r=function t(){a(this,t)}).\u0275mod=l.Fb({type:r}),r.\u0275inj=l.Eb({factory:function(t){return new(t||r)},imports:[[o.N,s.b,f.a,c.i.forChild([{path:"",component:b},{path:"hill-details",loadChildren:function(){return n.e(0).then(n.bind(null,"cyvj")).then((function(t){return t.HillDetailsPageModule}))}}])]]}),r)},sPtc:function(t,n,i){"use strict";i.d(n,"a",(function(){return o})),i.d(n,"b",(function(){return a})),i.d(n,"c",(function(){return r})),i.d(n,"d",(function(){return s}));var r=function(t,e){return null!==e.closest(t)},o=function(t,e){return"string"==typeof t&&t.length>0?Object.assign((r=!0,(i="ion-color-"+t)in(n={"ion-color":!0})?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n),e):e;var n,i,r},a=function(t){var e={};return function(t){return void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter((function(t){return null!=t})).map((function(t){return t.trim()})).filter((function(t){return""!==t})):[]}(t).forEach((function(t){return e[t]=!0})),e},c=/^[a-z][a-z0-9+\-.]*:/,s=function(){var t=e(regeneratorRuntime.mark((function t(e,n,i,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e||"#"===e[0]||c.test(e)){t.next=4;break}if(!(o=document.querySelector("ion-router"))){t.next=4;break}return t.abrupt("return",(null!=n&&n.preventDefault(),o.push(e,i,r)));case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}()}}])}();